@model IEnumerable<ShoesSalePage.Models.Cart>
@using ShoesSalePage.Models;
@{
    ViewBag.Title = "Cart";
    double total = 0;
}
<h2>Đơn hàng của bạn</h2>
<table cellpadding="4" cellspacing="4" border="1" class="flex-column" style="border-collapse:collapse;">
    <thead>
        <tr>
            <td style="border:1px solid black" class="fw-bold">ID</td>
            <td style="border:1px solid black" class="fw-bold">Tên sản phẩm</td>
            <td style="border:1px solid black" class="fw-bold">Hãng</td>
            <td style="border:1px solid black" class="fw-bold">Số lượng</td>
            <td style="border:1px solid black" class="fw-bold">Giá</td>
            <td style="border:1px solid black" class="fw-bold">Ngày</td>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in (List<Cart>)Session["Cart"])
        {
            <tr class="text-center">
                <td style="border:1px solid black">@item.Shoes.Id</td>
                <td style="border:1px solid black">@item.Shoes.Name</td>
                <td style="border:1px solid black">@item.Shoes.Brand</td>
                <td style="border:1px solid black">@item.Quantity</td>
                <td style="border:1px solid black">@String.Format("{0:n0}", item.Shoes.Price * item.Quantity) VND</td>
                <td style="border:1px solid black">@item.CreatedDate</td>
                @{ total += item.Shoes.Price * item.Quantity;}
                <td style="border:1px solid black">
                    <a class="text-decoration-none" href="@Url.Action("Remove", "Cart", new { id = item.Shoes.Id })">Gỡ</a>
                </td>
            </tr>
        }
    </tbody>
</table>
<p class="mt-4 fw-bold">Tổng: @String.Format("{0:n0}", total) VND</p>
<a class="btn btn-outline-primary mb-4" href="~/Shoes/Shop">
    Tiếp tục mua hàng
</a>
<a class="btn btn-outline-danger mb-4" href="@Url.Action("ConfirmOrder", "Cart")" onclick="OnAlert()">
    Xác nhận đơn hàng
</a>
@if (ViewBag.Message != null)
 {
    <p>@ViewBag.Message</p>
 }
<script type="text/javascript">
    function OnAlert() {
        alert("Nabati đã tiếp nhận đơn hàng, sau 24h sẽ có nhân viên gọi điện cho bạn!!!. Mã đơn hàng của bạn là @Session["OrderID"]");
    }
</script>
